---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const posts = await getCollection('blog')

const images = import.meta.glob(`../content/blog/img/*.{jpg,jpeg,png,gif}`);
---

<blog-home>
  <ul class="[&>*:nth-child(even)]:bg-base-200 shadow-md flex">
    { posts.map(post => 
      <li class="list-row">
        <div class="">
          <div>
            <a href={`/blog/posts/${post.id}`}>
              <Image 
                src={images[`../content/blog/img/${post.data.image}`]().then()} 
                alt={post.data.title} loading="lazy" class="size-50 rounded-box"
              />
            </a>
          </div>
          <div class="divider divider-horizontal"></div>
          <div class="pt-4 pr-4">
            <h1 class="text-2xl lg:text-4xl text-primary">{post.data.title}</h1>
            <p>{post.data.description}</p>
          </div>
        </div>
      </li>
    )}
  </ul>
</blog-home>